<!DOCTYPE html>

<html>

    <head>
        <script>
            // Initialize Genotype frequencies
            var a1a1 = 0.15;
            var a2a2 = 0.35;
            var a1a2 = 1 - (a1a1 + a2a2);

            var p = a1a1 + (a1a2 / 2);
            var q = 1 - p;

            function round_number(value, decimals) {
                var shifter = Math.pow(10, decimals);
                return Math.round(value * shifter) / shifter;
            }

            console.log("generation 0:", round_number(a1a1, 2), round_number(a1a2, 2), round_number(a2a2, 2));

            // calculating the next generation
            function create_next_generation() {
                a1a1 = p * p;
                a1a2 = 2 * p * q;
                a2a2 = q * q;
            }
            for(var i = 0; i < 5; i = i + 1) {
                create_next_generation();
                console.log("generation " + (i + 1) + ":", round_number(a1a1, 2), round_number(a1a2, 2), round_number(a2a2, 2));
            };

            // If we wanted to have an increment of 0.1 instead of 0.2, we would have to modify 5 lines, 
            // which is not what good programming is about ;)
            // Modify the code so that it uses a function show_values to print the values to the console,
            // and a function next to increment p by 0.2.
            // Obviously, the program will be shorter, less prone to bugs and easier to modify!

            var p = 0;
            var q = 1 - p;

            function next() {
                p = p + 0.2;
                q = 1 - p;
            }

            function show_values() {
                console.log('p =', p, 'q =', q);
            }
            for (var index = 0; index < 6; index++) {
                show_values();
                next();
            }
            
        </script>
    </head>

    <body>
    
    </body>

</html>